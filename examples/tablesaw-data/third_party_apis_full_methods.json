{
  "fullMethodsPaths" : [ {
    "entryPoint" : "tech.tablesaw.io.json.JsonReader.read",
    "thirdPartyMethod" : "com.fasterxml.jackson.databind.JsonNode.iterator",
    "thirdPartyPackage" : "com.fasterxml.jackson.databind",
    "path" : [ "tech.tablesaw.io.json.JsonReader.read", "tech.tablesaw.io.json.JsonReader.convertArrayOfArrays" ],
    "fullMethods" : [ "@Override\npublic Table read(JsonReadOptions options) {\n    JsonNode jsonObj = null;\n    try {\n        jsonObj = mapper.readTree(options.source().createReader(null));\n    } catch (IOException e) {\n        throw new RuntimeIOException(e);\n    }\n    if (options.path() != null) {\n        jsonObj = jsonObj.at(options.path());\n    }\n    if (!jsonObj.isArray()) {\n        throw new IllegalStateException(\"Only reading a JSON array is currently supported. The array must hold an array or object for each row.\");\n    }\n    if (jsonObj.size() == 0) {\n        return Table.create(options.tableName());\n    }\n    JsonNode firstNode = jsonObj.get(0);\n    if (firstNode.isArray()) {\n        return convertArrayOfArrays(jsonObj, options);\n    }\n    return convertArrayOfObjects(jsonObj, options);\n}", "private Table convertArrayOfArrays(JsonNode jsonObj, ReadOptions options) {\n    JsonNode firstNode = jsonObj.get(0);\n    boolean firstRowAllStrings = true;\n    List<String> columnNames = new ArrayList<>();\n    for (JsonNode n : firstNode) {\n        if (!n.isTextual()) {\n            firstRowAllStrings = false;\n        }\n    }\n    boolean hasHeader = firstRowAllStrings;\n    for (int i = 0; i < firstNode.size(); i++) {\n        columnNames.add(hasHeader ? firstNode.get(i).textValue() : \"Column \" + i);\n    }\n    List<String[]> dataRows = new ArrayList<>();\n    for (int i = (hasHeader) ? 1 : 0; i < jsonObj.size(); i++) {\n        JsonNode arr = jsonObj.get(i);\n        String[] row = new String[arr.size()];\n        for (int j = 0; j < arr.size(); j++) {\n            row[j] = arr.get(j).asText();\n        }\n        dataRows.add(row);\n    }\n    return TableBuildingUtils.build(columnNames, dataRows, options);\n}" ]
  }, {
    "entryPoint" : "tech.tablesaw.io.jsonl.JsonlReader.read",
    "thirdPartyMethod" : "com.fasterxml.jackson.databind.JsonNode.iterator",
    "thirdPartyPackage" : "com.fasterxml.jackson.databind",
    "path" : [ "tech.tablesaw.io.jsonl.JsonlReader.read", "tech.tablesaw.io.jsonl.JsonlReader.convertObjects" ],
    "fullMethods" : [ "@Override\npublic Table read(JsonlReadOptions options) {\n    ObjectReader stream = mapper.readerFor(JsonNode.class);\n    try {\n        Reader reader = options.source().createReader(null);\n        JsonParser parser = stream.createParser(reader);\n        Iterator<JsonNode> iter = stream.readValues(parser);\n        return convertObjects(iter, options);\n    } catch (IOException e) {\n        throw new RuntimeIOException(e);\n    }\n}", "private Table convertObjects(Iterator<JsonNode> iter, ReadOptions options) {\n    // flatten each object inside the array\n    StringBuilder result = new StringBuilder(\"[\");\n    boolean first = true;\n    for (; iter.hasNext();) {\n        JsonNode rowObj = iter.next();\n        String flattenedRow = null;\n        try {\n            flattenedRow = JsonFlattener.flatten(mapper.writeValueAsString(rowObj));\n        } catch (JsonProcessingException e) {\n            throw new RuntimeIOException(e);\n        }\n        if (!first) {\n            result.append(\",\");\n        }\n        first = false;\n        result.append(flattenedRow);\n    }\n    String flattenedJsonString = result.append(\"]\").toString();\n    JsonNode flattenedJsonObj = null;\n    try {\n        flattenedJsonObj = mapper.readTree(flattenedJsonString);\n    } catch (JsonProcessingException e) {\n        throw new RuntimeIOException(e);\n    }\n    Set<String> colNames = new LinkedHashSet<>();\n    for (JsonNode row : flattenedJsonObj) {\n        Iterator<String> fieldNames = row.fieldNames();\n        while (fieldNames.hasNext()) {\n            colNames.add(fieldNames.next());\n        } \n    }\n    List<String> columnNames = new ArrayList<>(colNames);\n    List<String[]> dataRows = new ArrayList<>();\n    for (JsonNode node : flattenedJsonObj) {\n        String[] arr = new String[columnNames.size()];\n        for (int i = 0; i < columnNames.size(); i++) {\n            if (node.has(columnNames.get(i))) {\n                arr[i] = node.get(columnNames.get(i)).asText();\n            } else {\n                arr[i] = null;\n            }\n        }\n        dataRows.add(arr);\n    }\n    return TableBuildingUtils.build(columnNames, dataRows, options);\n}" ]
  } ]
}